{% extends "base.html" %}
{% load i18n %}
{% load l10n %}
{% block content %}
    <h1>{% trans "lets translate this" %}</h1>
    {% get_current_language as LANGUAGE_CODE %}
    <h2>{{ LANGUAGE_CODE }}</h2>

    <h2>{{ title }}</h2>
    <form action="{% url 'set_language' %}" method="post">{% csrf_token %}
    <input type="hidden" name="text" value="{{ redirect_to }}">
    <select name="language" id="">
        {% get_available_languages as LANGUAGES %}
        {% get_language_info_list for LANGUAGES as languages %}
        {% for language in languages %}
            <option value="{{ language.code }}" {% if language.code == LANGUAGE_CODE %} selected {% endif %} >
            {{ language.name_local }} ({{ language.code }})
            </option>
        {% endfor %}
    </select>
    <input type="submit" value="GO">
    </form>

<table class="table">
    <tr>
        <a href="{% url 'artist-create' %}" role="button" class="btn btn-primary w-100">{% trans 'Create Artist' %}</a>
        <thead class="thead-light">
            <tr>
                <th scope="col"> {% trans 'Artist Name' %}</th>
            </tr>
        </thead>
        <tbody class="main_body artist_body">
            {% for artist in artists %}
            <tr>
                <td class="artist_data"  role="button" artist_data="{{ artist.id }}" artist_dob="{{ artist.date_of_birth }}"
                    artist_nationality="{{ artist.nationality }}"
                >
                    <a class="artists-all-data">{{ artist.full_name}}</a>
                    <a href="{% url 'artist-update' artist.id %}" role="button" class="btn btn-primary">{% trans 'Update Artist' %}</a>
                    <a href="{% url 'artist-delete' artist.id %}" role="button" class="btn btn-danger">{% trans 'Delete Artist' %}</a>
                </td>
            </tr>


            {% endfor %}
        </tbody>
</table>

    <a href="{% url 'album-list' %}" role="button" class="btn btn-primary">{% trans 'All Albums' %}</a>
    <a href="{% url 'song-list' %}" role="button" class="btn btn-primary">{% trans 'All Songs' %}</a>


                <!--MODAL-->
            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="artist-title" id="exampleModalLabel">Artist</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body artist-info">
                        </div>
                    </div>

                  </div>
                </div>
                  </div>
                </div>
              </div>
            </div>

            <!--END MODAL-->

<script type="text/javascript">


    $(".artists-all-data").click(function (){
        let catcher = $(this).closest('.artist_data')
        let artist_name = catcher.attr('artist_data');
        let artist_dob = catcher.attr('artist_dob');
        let artist_nationality = catcher.attr('artist_nationality');

        $('.artist-info').html(
            `<li>{% trans 'Artist Name' %}: ${artist_name}</li>
             <li>{% trans 'Date of birth' %} # ${artist_dob}</li>
             <li>{% trans 'Nationality' %} # ${artist_nationality}</li>`);
        $('#exampleModal').modal('show');
    })

</script>



{% endblock %}